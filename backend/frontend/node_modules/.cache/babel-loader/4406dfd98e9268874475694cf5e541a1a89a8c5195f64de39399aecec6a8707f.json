{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anubhavgoel/My Folder/01_My Programs/WebDev/Learning React/instagram-clone/backend/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/anubhavgoel/My Folder/01_My Programs/WebDev/Learning React/instagram-clone/backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/anubhavgoel/My Folder/01_My Programs/WebDev/Learning React/instagram-clone/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Navbar from\"./NavBar\";import\"../styles/Profile.css\";import Postdetails from\"./Postdetails\";import ProfilePic from\"./ProfilePic\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(){var _useState=useState({followers:[],following:[]}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setuser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),myposts=_useState4[0],setmyposts=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),popuppost=_useState6[0],setpopuppost=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setshow=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),prof=_useState10[0],setprof=_useState10[1];useEffect(function(){getdetails();fetchmyposts();window.scrollTo(0,0);},[]);var fetchmyposts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,parsed;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/myposts\",{method:\"get\",headers:{\"auth-token\":localStorage.getItem(\"token\")}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:parsed=_context.sent;setmyposts(parsed);case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchmyposts(){return _ref.apply(this,arguments);};}();var getdetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,parsed;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/fetchdetails\",{method:\"get\",headers:{\"auth-token\":localStorage.getItem(\"token\")}});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:parsed=_context2.sent;setuser(parsed.user);case 7:case\"end\":return _context2.stop();}},_callee2);}));return function getdetails(){return _ref2.apply(this,arguments);};}();var toggle=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(element){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(show){setshow(false);setpopuppost(null);}else{setpopuppost(element);setshow(true);}case 1:case\"end\":return _context3.stop();}},_callee3);}));return function toggle(_x){return _ref3.apply(this,arguments);};}();var toggleprof=function toggleprof(){if(prof){setprof(false);}else{setprof(true);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-picc\",children:/*#__PURE__*/_jsx(\"img\",{onClick:toggleprof,src:user.image,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"h2\",{children:user.userName}),/*#__PURE__*/_jsx(\"h3\",{children:user.name}),/*#__PURE__*/_jsxs(\"p\",{children:[myposts.length,\" Posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers.length,\" Followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following.length,\" Following\"]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{opacity:\"0.7\",margin:\"10px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:myposts.map(function(element){return/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){toggle(element);},style:{position:\"relative\"},children:/*#__PURE__*/_jsx(\"img\",{src:element.image,alt:\"\"},element.image)},element._id);})})]}),show&&/*#__PURE__*/_jsx(Postdetails,{popupPost:popuppost,setpopupPost:setpopuppost,show:show,setshow:setshow,fetchmyposts:fetchmyposts,user:user}),prof&&/*#__PURE__*/_jsx(ProfilePic,{toggleprof:toggleprof,setuser:setuser})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","Navbar","Postdetails","ProfilePic","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","_useState","followers","following","_useState2","_slicedToArray","user","setuser","_useState3","_useState4","myposts","setmyposts","_useState5","_useState6","popuppost","setpopuppost","_useState7","_useState8","show","setshow","_useState9","_useState10","prof","setprof","getdetails","fetchmyposts","window","scrollTo","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","parsed","wrap","_callee$","_context","prev","next","fetch","method","headers","localStorage","getItem","sent","json","stop","apply","arguments","_ref2","_callee2","_callee2$","_context2","toggle","_ref3","_callee3","element","_callee3$","_context3","_x","toggleprof","children","className","onClick","src","image","alt","userName","name","length","style","opacity","margin","map","position","_id","popupPost","setpopupPost"],"sources":["/Users/anubhavgoel/My Folder/01_My Programs/WebDev/Learning React/instagram-clone/backend/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Navbar from \"./NavBar\";\nimport \"../styles/Profile.css\";\nimport Postdetails from \"./Postdetails\";\nimport ProfilePic from \"./ProfilePic\";\n\nconst Profile = () => {\n  const [user, setuser] = useState({\n    followers: [],\n    following: [],\n  });\n  const [myposts, setmyposts] = useState([]);\n  const [popuppost, setpopuppost] = useState(null);\n  const [show, setshow] = useState(false);\n  const [prof, setprof] = useState(false);\n  useEffect(() => {\n    getdetails();\n    fetchmyposts();\n    window.scrollTo(0, 0);\n  }, []);\n  const fetchmyposts = async () => {\n    const res = await fetch(\"/myposts\", {\n      method: \"get\",\n      headers: {\n        \"auth-token\": localStorage.getItem(\"token\"),\n      },\n    });\n    const parsed = await res.json();\n    setmyposts(parsed);\n  };\n  const getdetails = async () => {\n    const res = await fetch(\"/fetchdetails\", {\n      method: \"get\",\n      headers: {\n        \"auth-token\": localStorage.getItem(\"token\"),\n      },\n    });\n    const parsed = await res.json();\n    setuser(parsed.user);\n  };\n  const toggle = async (element) => {\n    if (show) {\n      setshow(false);\n      setpopuppost(null);\n    } else {\n      setpopuppost(element);\n      setshow(true);\n    }\n  };\n  const toggleprof = () => {\n    if (prof) {\n      setprof(false);\n    } else {\n      setprof(true);\n    }\n  };\n  return (\n    <>\n      <Navbar />\n      <div className=\"profile\">\n        <div className=\"profile-top\">\n          <div className=\"profile-picc\" >\n            <img onClick={toggleprof}\n              src={user.image}\n              alt=\"\"\n            />\n          </div>\n          <div className=\"profile-data\">\n            <h2>{user.userName}</h2>\n            <h3>{user.name}</h3>\n            <p>{myposts.length} Posts</p>\n            <p>{user.followers.length} Followers</p>\n            <p>{user.following.length} Following</p>\n          </div>\n        </div>\n        <hr style={{ opacity: \"0.7\", margin: \"10px auto\" }}></hr>\n        <div className=\"gallery\">\n          {myposts.map((element) => {\n            return (\n              <div\n                onClick={() => {\n                  toggle(element);\n                }}\n                key={element._id}\n                style={{ position: \"relative\" }}\n              >\n                <img src={element.image} alt=\"\" key={element.image} />\n              </div>\n            );\n          })}\n        </div>\n      </div>\n      {show && (\n        <Postdetails\n          popupPost={popuppost}\n          setpopupPost={setpopuppost}\n          show={show}\n          setshow={setshow}\n          fetchmyposts={fetchmyposts}\n          user={user}\n        />\n      )}\n      {prof && <ProfilePic toggleprof={toggleprof} setuser={setuser}/>}\n    </>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}