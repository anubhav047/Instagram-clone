{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anubhavgoel/My Folder/01_My Programs/WebDev/Learning React/instagram-clone/backend/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/anubhavgoel/My Folder/01_My Programs/WebDev/Learning React/instagram-clone/backend/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/anubhavgoel/My Folder/01_My Programs/WebDev/Learning React/instagram-clone/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import\"../styles/profilepic.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfilePic=function ProfilePic(_ref){var toggleprof=_ref.toggleprof,setuser=_ref.setuser;var hiddenFileInput=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),imagefile=_useState2[0],setimagefile=_useState2[1];useEffect(function(){postdata();//eslint-disable-next-line\n},[imagefile]);var postdata=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,res,parsed;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!imagefile){_context.next=13;break;}data=new FormData();data.append(\"file\",imagefile);data.append(\"upload_preset\",\"instagram-clone\");data.append(\"cloud_name\",\"anubhavcloudinary\");_context.next=8;return fetch(\"https://api.cloudinary.com/v1_1/anubhavcloudinary/image/upload\",{method:\"post\",body:data});case 8:res=_context.sent;_context.next=11;return res.json();case 11:parsed=_context.sent;postToMongo(parsed.url);case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function postdata(){return _ref2.apply(this,arguments);};}();var handleclick=function handleclick(){hiddenFileInput.current.click();};var postToMongo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url){var res,parsed;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/postprofpic\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"auth-token\":localStorage.getItem(\"token\")},body:JSON.stringify({image:url})});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:parsed=_context2.sent;setuser(parsed.user);toggleprof();_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return function postToMongo(_x){return _ref3.apply(this,arguments);};}();var removeprofilepic=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var res,parsed;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"/removeprofpic\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",\"auth-token\":localStorage.getItem(\"token\")}});case 3:res=_context3.sent;_context3.next=6;return res.json();case 6:parsed=_context3.sent;setuser(parsed.user);toggleprof();_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 14:case\"end\":return _context3.stop();}},_callee3,null,[[0,11]]);}));return function removeprofilepic(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"profilepic\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"prof-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Change Profile Photo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upload-photo\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:function onClick(){handleclick();},children:\"Upload Photo\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:hiddenFileInput,accept:\"image/*\",style:{display:\"none\"},onChange:function onChange(e){setimagefile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"div\",{className:\"remove-photo\",children:/*#__PURE__*/_jsx(\"button\",{onClick:removeprofilepic,className:\"btn\",children:\"Remove Current Photo\"})}),/*#__PURE__*/_jsx(\"div\",{onClick:toggleprof,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Cancel\"})})]})});};export default ProfilePic;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","ProfilePic","_ref","toggleprof","setuser","hiddenFileInput","_useState","_useState2","_slicedToArray","imagefile","setimagefile","postdata","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","res","parsed","wrap","_callee$","_context","prev","next","FormData","append","fetch","method","body","sent","json","postToMongo","url","t0","console","error","stop","apply","arguments","handleclick","current","click","_ref3","_callee2","_callee2$","_context2","headers","localStorage","getItem","JSON","stringify","image","user","_x","removeprofilepic","_ref4","_callee3","_callee3$","_context3","className","children","onClick","type","ref","accept","style","display","onChange","e","target","files"],"sources":["/Users/anubhavgoel/My Folder/01_My Programs/WebDev/Learning React/instagram-clone/backend/frontend/src/components/ProfilePic.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"../styles/profilepic.css\";\n\nconst ProfilePic = ({ toggleprof, setuser }) => {\n  const hiddenFileInput = useRef();\n  const [imagefile, setimagefile] = useState(null);\n  useEffect(() => {\n   postdata();\n   //eslint-disable-next-line\n  }, [imagefile])\n  \n  const postdata = async () => {\n    try {\n      if (imagefile) {\n        const data = new FormData();\n        data.append(\"file\", imagefile);\n        data.append(\"upload_preset\", \"instagram-clone\");\n        data.append(\"cloud_name\", \"anubhavcloudinary\");\n        const res = await fetch(\n          \"https://api.cloudinary.com/v1_1/anubhavcloudinary/image/upload\",\n          {\n            method: \"post\",\n            body: data,\n          }\n        );\n        const parsed = await res.json();\n        postToMongo(parsed.url);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const handleclick = () => {\n    hiddenFileInput.current.click();\n  };\n  const postToMongo = async (url) => {\n    try {\n      const res = await fetch(\"/postprofpic\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": localStorage.getItem(\"token\"),\n        },\n        body: JSON.stringify({ image: url }),\n      })\n      const parsed = await res.json();\n      setuser(parsed.user);\n      toggleprof();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const removeprofilepic = async () => {\n    try {\n      const res = await fetch(\"/removeprofpic\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": localStorage.getItem(\"token\"),\n        }\n      })\n      const parsed = await res.json();\n      setuser(parsed.user);\n      toggleprof();\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return (\n    <div className=\"profilepic\">\n      <div className=\"prof-container\">\n        <h3>Change Profile Photo</h3>\n        <div className=\"upload-photo\">\n          <button\n            className=\"btn\"\n            onClick={() => {\n              handleclick();\n            }}\n          >\n            Upload Photo\n          </button>\n        </div>\n        <input\n          type=\"file\"\n          ref={hiddenFileInput}\n          accept=\"image/*\"\n          style={{ display: \"none\" }}\n          onChange={(e) => {\n            setimagefile(e.target.files[0]);\n          }}\n        />\n        <div className=\"remove-photo\">\n          <button onClick={removeprofilepic}className=\"btn\">Remove Current Photo</button>\n        </div>\n        <div onClick={toggleprof}>\n          <button className=\"btn\">Cancel</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfilePic;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}